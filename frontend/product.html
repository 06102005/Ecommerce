<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product | Aruvi Organics</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="navbar">
  <div class="logo">Aruvi Organics</div>
  <ul>
    <li><a href="shop.html">← Back to Shop</a></li>
  </ul>
</nav>

<section class="product-detail">

  <!-- IMAGE ZOOM -->
  <div class="img-zoom-container">
    <img id="productImg">
    <div id="lens"></div>
  </div>

  <!-- PRODUCT INFO -->
  <div class="product-info">
    <h2 id="productName"></h2>

    <!-- PRICE ON TOP -->
    <p class="price">
      Price: $<span id="productPrice"></span>
    </p>

    <!-- QUANTITY SELECTOR -->
    <div class="quantity-box">
      <button onclick="changeQty(-1)">−</button>
      <span id="qty">1</span>
      <button onclick="changeQty(1)">+</button>
    </div>

    <!-- TOTAL PRICE -->
    <p class="total">
      Total: $<span id="totalPrice"></span>
    </p>

    <!-- DESCRIPTION -->
    <p class="description">
      Our organic products are naturally harvested, chemical-free,
      and carefully processed to maintain quality and nutrition.
    </p>

    <button class="add-to-cart">Add to Cart</button>
  </div>

</section>

<footer>
  <p>© 2025 Aruvi Organics</p>
</footer>

<!-- SCRIPT -->
<script>
const params = new URLSearchParams(window.location.search);

// GET PRODUCT DATA FROM SHOP
const name = params.get("name");
const price = parseFloat(params.get("price"));
const image = params.get("image");

// SET PRODUCT INFO
document.getElementById("productName").innerText = name;
document.getElementById("productPrice").innerText = price.toFixed(2);

const img = document.getElementById("productImg");
const lens = document.getElementById("lens");

img.src = image;

// QUANTITY & TOTAL
let quantity = 1;
document.getElementById("qty").innerText = quantity;
document.getElementById("totalPrice").innerText = price.toFixed(2);

function changeQty(value) {
  quantity += value;
  if (quantity < 1) quantity = 1;

  document.getElementById("qty").innerText = quantity;
  document.getElementById("totalPrice").innerText =
    (price * quantity).toFixed(2);
}

// IMAGE ZOOM
img.addEventListener("mouseenter", () => lens.style.display = "block");
img.addEventListener("mouseleave", () => lens.style.display = "none");
img.addEventListener("mousemove", zoom);

function zoom(e) {
  const rect = img.getBoundingClientRect();
  let x = e.clientX - rect.left - lens.offsetWidth / 2;
  let y = e.clientY - rect.top - lens.offsetHeight / 2;

  x = Math.max(0, Math.min(x, img.width - lens.offsetWidth));
  y = Math.max(0, Math.min(y, img.height - lens.offsetHeight));

  lens.style.left = x + "px";
  lens.style.top = y + "px";

  lens.style.backgroundImage = `url(${img.src})`;
  lens.style.backgroundSize =
    img.width * 2 + "px " + img.height * 2 + "px";
  lens.style.backgroundPosition = `-${x * 2}px -${y * 2}px`;
}
</script>

</body>
</html>
